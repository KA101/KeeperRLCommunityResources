<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Download Directory Example</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>
</head>
<body>

    <h1>Tinker with and download your own new keeper in a new mod for KeeperRL.</h1>
	<button id="downloadZip">Download Mod .zip file and unzip to keeperRL\Mods</button>
    <style>
        body {
            margin: 0; /* Remove default margin */
            height: 100vh; /* Full height */
            display: flex; /* Use flexbox for layout */
            flex-direction: column; /* Column direction */
        }
        #creatureInput {
            flex: 1; /* Take up remaining space */
            width: 100%; /* Full width */
            resize: none; /* Prevent resizing */
            font-family: monospace; /* Monospace font for better readability */
        }
    </style>
<textarea id="creatureInput" placeholder="Enter contents for keeper_creatures.txt">
"9.1 Test Keeper"
{

  #You can construct a new keeper just from the pieces of configuration already defined in vanilla.
  
  #Vanilla config files are found here: https://github.com/miki151/keeperrl/tree/master/data_free/game_config
  
  #eg. https://github.com/miki151/keeperrl/tree/master/data_free/game_config/creatures.txt

  baseName = "Adventurer" #The Type of keeper this will appear under in the game
  creatureId = { "RED_DRAGON" } #From Creatures.txt 
  tribeAlignment = EVIL #EVIL or LAWFUL
  description = "Play as a red dragon rampaging villagers." #Make your own description 
  villainGroups = { EVIL_KEEPER EVIL_COTTAGES } #Can replace EVIL with LAWFUL for different enemies
  immigrantGroups = {} #Use this if you want to have immigration from immigration.txt
  technology = {} #Use this if you want to have technology from technology.txt
  zLevelGroups = { "basic" } #choose the zlevels from zlevels.txt
  initialTech = { } #Give the keeper any starting tech you want from technology.txt
  buildingGroups = {} #Choose some top level menu groups for building furniture from build_menu.txt
  workshopGroups = {} #Let the keeper craft things by assigning top level workshop item groups from workshops_menu.txt
  minionTraits = {LEADER WORKER} #CIVILIAN and PRISONER are also valid values.
  maxPopulation = 1 #Increase if you want to allow imigration
  startingBase = { 8 8 } "castle_empty" #Choose a random layout from enemies.txt for your keeper's base
  prisoners = false #Or let them capture
  requireQuartersForExp = false #Put to true if you want to force your keeper to build quarters to level up.
}
</textarea>
    <script>
        document.getElementById('downloadZip').addEventListener('click', function () {
            const zip = new JSZip();

            // Adding files to the zip
            zip.file("details.txt", '"Softmonster"\n"Add a test Keeper to the game."');
            zip.file("version_info", "0\n0\nAlpha37");
            zip.file("keeper_creatures.txt", document.getElementById('creatureInput').value); // Content from textbox

            // Generate the zip file
            zip.generateAsync({ type: "blob" })
                .then(function (content) {
                    // Change the name of the zip file to TestKeeper.zip
                    saveAs(content, "TestKeeper.zip");
                });
        });
    </script>
</body>
</html>
